{"openapi":"3.0.1","info":{"title":"MarketNow Backend API","description":"A comprehensive Spring Boot application for market data, news, and user management","contact":{"name":"MarketNow Team","url":"https://marketnow.com","email":"support@marketnow.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Development server"},{"url":"https://api.marketnow.com","description":"Production server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Admin Management","description":"Admin operations for user and system management"},{"name":"News","description":"Financial news and headlines APIs"},{"name":"Authentication","description":"Authentication management APIs"},{"name":"Users","description":"User management APIs"},{"name":"Stocks","description":"Stock market data APIs"}],"paths":{"/api/user/{id}":{"put":{"tags":["Users"],"summary":"Update user","description":"Updates an existing user's information","operationId":"updateUser","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string"},"example":"507f1f77bcf86cd799439011"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}},"required":true},"responses":{"200":{"description":"User updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}},"delete":{"tags":["Users"],"summary":"Delete user","description":"Deletes a user from the system","operationId":"deleteUser","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string"},"example":"507f1f77bcf86cd799439011"}],"responses":{"200":{"description":"User deleted successfully"},"404":{"description":"User not found"}}}},"/api/admin/users/{userId}/roles":{"put":{"tags":["Admin Management"],"summary":"Set user roles","description":"Replace all roles for a user with the provided roles","operationId":"setUserRoles","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/Role"}}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}},"post":{"tags":["Admin Management"],"summary":"Assign role to user","description":"Assign a specific role to a user","operationId":"assignRoleToUser","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"string"}},{"name":"roleName","in":"query","description":"Role name","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/admin/users/{userId}/role":{"put":{"tags":["Admin Management"],"summary":"Set user role","description":"Set a user's role (normal or special) while preserving admin role if present","operationId":"setUserRole","parameters":[{"name":"userId","in":"path","description":"User ID","required":true,"schema":{"type":"string"}},{"name":"role","in":"query","description":"Role to set (ROLE_NORMAL or ROLE_SPECIAL)","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/admin/users/{id}":{"get":{"tags":["Admin Management"],"summary":"Get user by ID","description":"Retrieve a specific user by their ID","operationId":"getUserById","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}},"put":{"tags":["Admin Management"],"summary":"Update user","description":"Update an existing user's information","operationId":"updateUser_1","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}},"delete":{"tags":["Admin Management"],"summary":"Delete user","description":"Delete a user from the system","operationId":"deleteUser_1","parameters":[{"name":"id","in":"path","description":"User ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/admin/libor/special":{"get":{"tags":["Admin Management"],"summary":"Get special LIBOR spread","description":"Get the current LIBOR spread for special users","operationId":"getLiborSpreadSpecial","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"number"}}}}}},"put":{"tags":["Admin Management"],"summary":"Set special LIBOR spread","description":"Update the LIBOR spread for special users","operationId":"setLiborSpreadSpecial","requestBody":{"content":{"application/json":{"schema":{"type":"number"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/admin/libor/normal":{"get":{"tags":["Admin Management"],"summary":"Get normal LIBOR spread","description":"Get the current LIBOR spread for normal users","operationId":"getLiborSpreadNormal","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"number"}}}}}},"put":{"tags":["Admin Management"],"summary":"Set normal LIBOR spread","description":"Update the LIBOR spread for normal users","operationId":"setLiborSpreadNormal","requestBody":{"content":{"application/json":{"schema":{"type":"number"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/wishlist/stock/{username}/{stockSymbol}":{"post":{"tags":["wishlist-controller"],"operationId":"addToStockWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"stockSymbol","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StockWishlist"}}}}}},"delete":{"tags":["wishlist-controller"],"operationId":"removeFromStockWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"stockSymbol","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StockWishlist"}}}}}}},"/api/wishlist/news/{username}/{newsItem}":{"post":{"tags":["wishlist-controller"],"operationId":"addToNewsWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"newsItem","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NewsWishlist"}}}}}},"delete":{"tags":["wishlist-controller"],"operationId":"removeFromNewsWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"newsItem","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NewsWishlist"}}}}}}},"/api/wishlist/currency/{username}/{currencyCode}":{"post":{"tags":["wishlist-controller"],"operationId":"addToCurrencyWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"currencyCode","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CurrencyWishlist"}}}}}},"delete":{"tags":["wishlist-controller"],"operationId":"removeFromCurrencyWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}},{"name":"currencyCode","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CurrencyWishlist"}}}}}}},"/api/auth/register":{"post":{"tags":["Authentication"],"summary":"Register a new user","description":"Creates a new user account with the provided information","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"409":{"description":"User already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"200":{"description":"User registered successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/auth/register/admin":{"post":{"tags":["Authentication"],"summary":"Register a new admin user","description":"Creates a new admin user account with ROLE_ADMIN","operationId":"registerAdmin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"409":{"description":"User already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"200":{"description":"Admin user registered successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"User login","description":"Authenticates user credentials and returns authentication token","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"401":{"description":"Invalid credentials","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"200":{"description":"Login successful","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/api/ai/summarize":{"post":{"tags":["ai-controller"],"operationId":"summarizeNews","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/ai/ask":{"post":{"tags":["ai-controller"],"operationId":"answerQuestion","requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/admin/users":{"get":{"tags":["Admin Management"],"summary":"Get all users","description":"Retrieve a list of all users in the system","operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}},"post":{"tags":["Admin Management"],"summary":"Create new user","description":"Create a new user in the system using AuthService","operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/admin/users/roles/bulk":{"post":{"tags":["Admin Management"],"summary":"Bulk role assignment","description":"Assign multiple roles to a user using DTO","operationId":"assignRolesBulk","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleAssignmentRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/admin/users/admin":{"post":{"tags":["Admin Management"],"summary":"Create new admin user","description":"Create a new admin user in the system","operationId":"createAdminUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}}}},"/api/admin/roles":{"get":{"tags":["Admin Management"],"summary":"Get all roles","description":"Retrieve a list of all available roles","operationId":"getAllRoles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Role"}}}}}}},"post":{"tags":["Admin Management"],"summary":"Create new role","description":"Create a new role in the system","operationId":"createRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Role"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Role"}}}}}}},"/test":{"get":{"tags":["mongo-test-controller"],"operationId":"testMongo","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/wishlist/stock/{username}":{"get":{"tags":["wishlist-controller"],"operationId":"getStockWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/StockWishlist"}}}}}}},"/api/wishlist/news/{username}":{"get":{"tags":["wishlist-controller"],"operationId":"getNewsWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/NewsWishlist"}}}}}}},"/api/wishlist/currency/{username}":{"get":{"tags":["wishlist-controller"],"operationId":"getCurrencyWishlist","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CurrencyWishlist"}}}}}}},"/api/user/me":{"get":{"tags":["Users"],"summary":"Get current user","description":"Retrieves the profile of the currently authenticated user","operationId":"getCurrentUser","responses":{"401":{"description":"User not authenticated","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"200":{"description":"User profile retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}}},"security":[{"bearerAuth":[]}]}},"/api/stocks/symbols":{"get":{"tags":["Stocks"],"summary":"Get stock symbols","description":"Retrieves a list of stock symbols for a given exchange with pagination","operationId":"getStockSymbols","parameters":[{"name":"exchange","in":"query","description":"Stock exchange code (2-4 uppercase letters)","required":true,"schema":{"pattern":"^[A-Z]{2,4}$","type":"string"},"example":"NASDAQ"},{"name":"page","in":"query","description":"Page number (0-based)","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0},"example":0},{"name":"size","in":"query","description":"Number of items per page (max 1000)","required":false,"schema":{"maximum":1000,"type":"integer","format":"int32","default":100},"example":100}],"responses":{"404":{"description":"Exchange not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Stock"}}}}},"400":{"description":"Invalid exchange parameter","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Stock"}}}}},"200":{"description":"Stock symbols retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Stock"}}}}}}},"/api/stocks/quote":{"get":{"tags":["Stocks"],"summary":"Get stock quote","description":"Retrieves real-time stock quote for a given symbol","operationId":"getStockQuote","parameters":[{"name":"symbol","in":"query","description":"Stock symbol","required":true,"schema":{"type":"string"},"example":"AAPL"}],"responses":{"404":{"description":"Stock symbol not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Stock"}}}},"400":{"description":"Invalid symbol parameter","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Stock"}}}},"200":{"description":"Stock quote retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Stock"}}}}}}},"/api/news/headlines":{"get":{"tags":["News"],"summary":"Get top headlines","description":"Retrieves the latest top headlines from various sources","operationId":"getTopHeadlines","responses":{"200":{"description":"Top headlines retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/News"}}}}}}},"/api/news/category":{"get":{"tags":["News"],"summary":"Get news by category","description":"Retrieves news articles filtered by a specific category","operationId":"getNewsByCategory","parameters":[{"name":"category","in":"query","description":"News category","required":true,"schema":{"type":"string"},"example":"technology"}],"responses":{"400":{"description":"Invalid category parameter","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/News"}}}}},"404":{"description":"Category not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/News"}}}}},"200":{"description":"News articles retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/News"}}}}}}},"/api/news/categories":{"get":{"tags":["News"],"summary":"Get all news categories","description":"Retrieves a list of all available news categories","operationId":"getAllCategories","responses":{"200":{"description":"Categories retrieved successfully","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/currency/exchange":{"get":{"tags":["currency-controller"],"operationId":"getExchangeRate","parameters":[{"name":"base","in":"query","required":true,"schema":{"type":"string"}},{"name":"target","in":"query","required":true,"schema":{"type":"string"}},{"name":"customerType","in":"query","required":false,"schema":{"type":"string","default":"normal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CurrencyExchangeRate"}}}}}}},"/api/currency/convert":{"get":{"tags":["currency-controller"],"operationId":"convertCurrency","parameters":[{"name":"base","in":"query","required":true,"schema":{"type":"string"}},{"name":"target","in":"query","required":true,"schema":{"type":"string"}},{"name":"amount","in":"query","required":true,"schema":{"type":"number"}},{"name":"customerType","in":"query","required":false,"schema":{"type":"string","default":"normal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"number"}}}}}}},"/api/admin/users/special":{"get":{"tags":["Admin Management"],"summary":"Get special users","description":"Retrieve all users with special role","operationId":"getSpecialUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}},"/api/admin/users/roles/{roleName}":{"get":{"tags":["Admin Management"],"summary":"Get users by role","description":"Retrieve all users with a specific role","operationId":"getUsersByRole","parameters":[{"name":"roleName","in":"path","description":"Role name","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}},"/api/admin/users/normal":{"get":{"tags":["Admin Management"],"summary":"Get normal users","description":"Retrieve all users with normal role","operationId":"getNormalUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}}},"components":{"schemas":{"UserDTO":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"},"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}}},"Role":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}},"User":{"type":"object","properties":{"id":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"},"email":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"},"roles":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/Role"}},"provider":{"type":"string"},"providerId":{"type":"string"}}},"StockWishlist":{"type":"object","properties":{"username":{"type":"string"},"favoriteStocks":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"NewsWishlist":{"type":"object","properties":{"username":{"type":"string"},"favoriteNews":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"CurrencyWishlist":{"type":"object","properties":{"username":{"type":"string"},"favoriteCurrencies":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"RegisterRequest":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"AuthResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"tokenType":{"type":"string"},"username":{"type":"string"},"email":{"type":"string"},"roles":{"type":"array","items":{"$ref":"#/components/schemas/GrantedAuthority"}},"token":{"type":"string"}}},"GrantedAuthority":{"type":"object","properties":{"authority":{"type":"string"}}},"RoleAssignmentRequest":{"type":"object","properties":{"userId":{"type":"string"},"roleNames":{"uniqueItems":true,"type":"array","items":{"type":"string"}}}},"Stock":{"type":"object","properties":{"symbol":{"type":"string"},"currency":{"type":"string"},"description":{"type":"string"},"displaySymbol":{"type":"string"},"figi":{"type":"string"},"mic":{"type":"string"},"type":{"type":"string"},"exchange":{"type":"string"},"currentPrice":{"type":"number","format":"double"},"change":{"type":"number","format":"double"},"percentChange":{"type":"number","format":"double"},"high":{"type":"number","format":"double"},"low":{"type":"number","format":"double"},"open":{"type":"number","format":"double"},"previousClose":{"type":"number","format":"double"},"timestamp":{"type":"integer","format":"int64"}}},"News":{"type":"object","properties":{"category":{"type":"string"},"datetime":{"type":"integer","format":"int64"},"headline":{"type":"string"},"newsId":{"type":"string"},"image":{"type":"string"},"related":{"type":"string"},"source":{"type":"string"},"summary":{"type":"string"},"url":{"type":"string"}}},"CurrencyExchangeRate":{"type":"object","properties":{"base":{"type":"string"},"target":{"type":"string"},"rate":{"type":"number"},"finalRate":{"type":"number"},"customerType":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT Authorization header using the Bearer scheme. Example: \"Authorization: Bearer {token}\"","scheme":"bearer","bearerFormat":"JWT"},"oauth2":{"type":"oauth2","description":"OAuth2 authentication with Google","flows":{"authorizationCode":{"authorizationUrl":"https://accounts.google.com/o/oauth2/v2/auth","tokenUrl":"https://oauth2.googleapis.com/token","scopes":{"email":"Access to user's email address","profile":"Access to user's profile information"}}}}}}}